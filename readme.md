# Выявление нежелательных IP адресов

**Скрипт, который поможет выявлять нежелательные IP адреса посетителей/ботов и отображать их в Метрике для дальнейшей блокировки через файл .htaccess**

__Настройка:__

1. Необходимо в поле **IDmetrika:** ******* вместо ******* вставить номер счетчика из Яндекс Метрики.

2. Функция работает с помощью метода setTimeout(), то есть скрипт будет запускаться по истечению 1 секунды, вы можете указать свое значение, по умолчанию 1000.

3. Скрипт необходимо разместить в шаблон сайта, если вы хотите считывать IP адрес по всем страница. (Делать этого не рекомендуется). Рекомендуется разместить данный скрипт **НА ВРЕМЯ** на ту страницу, где происходит атака **прямых заходов (ботов)** для определния их IP адреса.

4. В Метрике в разделе **ВебВизор** дополнительно настроить __столбцы__ _"Параметры посетителей"_ и _"Параметры визитов"_ (В них будут отображаться IP адреса посетителей).

5. Вам остается только отобрать нежелательные IP адреса и заблокировать их с помощью .**htaccess**, или различные сервисы, например, **Cloudflare**.

6. После устранения нежелательных IP адресов убрать скрипт с шаблона/страницы сайта.